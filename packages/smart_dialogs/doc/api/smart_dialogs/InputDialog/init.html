<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the init method from the InputDialog class, for the Dart programming language.">
  <title>init method - InputDialog class - smart_dialogs library - Dart API</title>
  <!-- required because all the links are pseudo-absolute -->
  <base href="../..">

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500,400i,400,300|Source+Sans+Pro:400,300,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="static-assets/github.css">
  <link rel="stylesheet" href="static-assets/styles.css">
  <link rel="icon" href="static-assets/favicon.png">
  
</head>

<body>

<div id="overlay-under-drawer"></div>

<header id="title">
  <button id="sidenav-left-toggle" type="button">&nbsp;</button>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="index.html">smart_dialogs</a></li>
    <li><a href="smart_dialogs/smart_dialogs-library.html">smart_dialogs</a></li>
    <li><a href="smart_dialogs/InputDialog-class.html">InputDialog</a></li>
    <li class="self-crumb">init method</li>
  </ol>
  <div class="self-name">init</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<main>

  <div id="dartdoc-sidebar-left" class="col-xs-6 col-sm-3 col-md-2 sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
      <form class="search-sidebar" role="search">
        <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
      </form>
    </header>
    
    <ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
      <li><a href="index.html">smart_dialogs</a></li>
      <li><a href="smart_dialogs/smart_dialogs-library.html">smart_dialogs</a></li>
      <li><a href="smart_dialogs/InputDialog-class.html">InputDialog</a></li>
      <li class="self-crumb">init method</li>
    </ol>
    
    <h5>InputDialog class</h5>
    <ol>
      <li class="section-title"><a href="smart_dialogs/InputDialog-class.html#constructors">Constructors</a></li>
      <li><a href="smart_dialogs/InputDialog/InputDialog.html">InputDialog</a></li>
      <li><a href="smart_dialogs/InputDialog/InputDialog.noModal.html">noModal</a></li>
      <li><a href="smart_dialogs/InputDialog/InputDialog.twoD.html">twoD</a></li>
    
      <li class="section-title">
        <a href="smart_dialogs/InputDialog-class.html#instance-properties">Properties</a>
      </li>
      <li><a href="smart_dialogs/InputDialog/actButs.html">actButs</a></li>
      <li><a href="smart_dialogs/InputDialog/diaTable.html">diaTable</a></li>
      <li><a href="smart_dialogs/InputDialog/popup.html">popup</a></li>
      <li><a href="smart_dialogs/InputDialog/RADIOGROUP1.html">RADIOGROUP1</a></li>
      <li><a href="smart_dialogs/InputDialog/redcross_left.html">redcross_left</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/closeCallback.html">closeCallback</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/dia.html">dia</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/diaContainer.html">diaContainer</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/hashCode.html">hashCode</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/isModal.html">isModal</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/isopen.html">isopen</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/runtimeType.html">runtimeType</a></li>
    
      <li class="section-title"><a href="smart_dialogs/InputDialog-class.html#instance-methods">Methods</a></li>
      <li><a href="smart_dialogs/InputDialog/init.html">init</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/close.html">close</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/createShowDia.html">createShowDia</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/isOpen.html">isOpen</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/noSuchMethod.html">noSuchMethod</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/toString.html">toString</a></li>
    
      <li class="section-title inherited"><a href="smart_dialogs/InputDialog-class.html#operators">Operators</a></li>
      <li class="inherited"><a href="smart_dialogs/BaseDialog/operator_equals.html">operator ==</a></li>
    
      <li class="section-title"><a href="smart_dialogs/InputDialog-class.html#static-properties">Static properties</a></li>
      <li><a href="smart_dialogs/InputDialog/ALIGN_LEFT.html">ALIGN_LEFT</a></li>
      <li><a href="smart_dialogs/InputDialog/COL1.html">COL1</a></li>
      <li><a href="smart_dialogs/InputDialog/COL2.html">COL2</a></li>
      <li><a href="smart_dialogs/InputDialog/DISABLE_COMBO_SELECTION.html">DISABLE_COMBO_SELECTION</a></li>
      <li><a href="smart_dialogs/InputDialog/ENABLE_TEXTINPUT_COMBO.html">ENABLE_TEXTINPUT_COMBO</a></li>
      <li><a href="smart_dialogs/InputDialog/inputDialogStatus.html">inputDialogStatus</a></li>
      <li><a href="smart_dialogs/InputDialog/READ_ONLY.html">READ_ONLY</a></li>
    
      <li class="section-title"><a href="smart_dialogs/InputDialog-class.html#static-methods">Static methods</a></li>
      <li><a href="smart_dialogs/InputDialog/show.html">show</a></li>
      <li><a href="smart_dialogs/InputDialog/show2D.html">show2D</a></li>
    
    </ol>
  </div><!--/.sidebar-offcanvas-->

  <div id="dartdoc-main-content" class="col-xs-12 col-sm-9 col-md-8 main-content">
      <div><h1><span class="kind-method">init</span> method</h1></div>

    <section class="multi-line-signature">
      <span class="returntype">dynamic</span>
            <span class="name ">init</span>
(<wbr><span class="parameter" id="init-param-buttontype"><span class="type-annotation">String</span> <span class="parameter-name">buttontype</span>, </span> <span class="parameter" id="init-param-htmlTitleText"><span class="type-annotation">String</span> <span class="parameter-name">htmlTitleText</span>, </span> <span class="parameter" id="init-param-inputTextLabelInfo"><span class="type-annotation">List<span class="signature">&lt;<wbr><span class="type-parameter">String</span>&gt;</span></span> <span class="parameter-name">inputTextLabelInfo</span>, </span> <span class="parameter" id="init-param-comboInfoND"><span class="type-annotation">Map<span class="signature">&lt;<wbr><span class="type-parameter">int</span>, <span class="type-parameter">List<span class="signature">&lt;<wbr><span class="type-parameter">List<span class="signature">&lt;<wbr><span class="type-parameter">String</span>&gt;</span></span>&gt;</span></span>&gt;</span></span> <span class="parameter-name">comboInfoND</span>, </span> <span class="parameter" id="init-param-defaultInputTextsND"><span class="type-annotation">Map<span class="signature">&lt;<wbr><span class="type-parameter">int</span>, <span class="type-parameter">List<span class="signature">&lt;<wbr><span class="type-parameter">String</span>&gt;</span></span>&gt;</span></span> <span class="parameter-name">defaultInputTextsND</span>, </span> <span class="parameter" id="init-param-sizes"><span class="type-annotation">List<span class="signature">&lt;<wbr><span class="type-parameter">int</span>&gt;</span></span> <span class="parameter-name">sizes</span>, </span> <span class="parameter" id="init-param-isChecked"><span class="type-annotation">List<span class="signature">&lt;<wbr><span class="type-parameter">String</span>&gt;</span></span> <span class="parameter-name">isChecked</span>, </span> <span class="parameter" id="init-param-alternateRowColor"><span class="type-annotation">bool</span> <span class="parameter-name">alternateRowColor</span>, </span> <span class="parameter" id="init-param-buttonLabels"><span class="type-annotation">List<span class="signature">&lt;<wbr><span class="type-parameter">String</span>&gt;</span></span> <span class="parameter-name">buttonLabels</span></span>)
      
    </section>
    <section class="desc markdown">
      <p>Creates and displays a dialog.
See <a href="smart_dialogs/InputDialog-class.html">InputDialog</a> and <a href="smart_dialogs/InputDialog/InputDialog.twoD.html">InputDialog.twoD</a> for the arguments.</p>
    </section>
    
    <section class="summary source-code" id="source">
      <h2><span>Implementation</span></h2>
      <pre class="language-dart"><code class="language-dart">init(
    String buttontype,
    String htmlTitleText,
    List&lt;String&gt; inputTextLabelInfo,
    Map&lt;int, List&lt;List&lt;String&gt;&gt;&gt; comboInfoND,
    Map&lt;int, List&lt;String&gt;&gt; defaultInputTextsND,
    List&lt;int&gt; sizes,
    List&lt;String&gt; isChecked,
    bool alternateRowColor,
    List&lt;String&gt; buttonLabels) {
  List&lt;String&gt; defaultInputTexts, defaultInputTexts2D;
  List&lt;List&lt;String&gt;&gt; comboInfo1D, comboInfo2D;

  Map&lt;String, String&gt; attr = DiaAttr.attr; &#47;&#47; use shortcut
  bool hasDim1Combo = false;
  if (comboInfoND != null) {
    comboInfo1D = comboInfoND[COL1];
    comboInfo2D = comboInfoND[COL2];
    if (comboInfo1D != null) {
      for (List&lt;String&gt; temp in comboInfo1D) {
        if (temp != null) {
          hasDim1Combo = true; &#47;&#47; needed later to build nice col. alignment
          break;
        }
      }
    }
  }

  int dim = 1;
  if (defaultInputTextsND != null) {
    defaultInputTexts = defaultInputTextsND[COL1];
    defaultInputTexts2D = defaultInputTextsND[COL2];
    if (defaultInputTexts2D != null) {
      dim = 2;
    }
  }

  if (DiaUtils.isSafariIOS()) {
    redcross_left = true; &#47;&#47; delete icon left to conform to iOS
  }

  inputDialogStatus = 1;
  int NCOLS = 4; &#47;&#47; check&#47;radio button, text, input field, combo
  if (dim == 2) {
    NCOLS = 6; &#47;&#47; input field, combo for 2D
  }

  bool showAbortIcon = true; &#47;&#47; as of now, we always show an abort icon
  int delIconSize = int.parse(attr[DiaAttr.DIALOG_CROSS_FONTSIZE]);
  TableCellElement delCell;
  List&lt;TableCellElement&gt; fakeCells = List&lt;TableCellElement&gt;(NCOLS - 1);
  String alignCross = &quot;right&quot;;
  if (redcross_left) {
    alignCross = &quot;left&quot;;
  }
  if (showAbortIcon != null &amp;&amp; showAbortIcon) {
    delCell = TableCellElement();
    &#47;&#47; we need this for delCell to be rightmost
    for (int i = 0; i &lt; NCOLS - 1; i++) {
      fakeCells[i] = TableCellElement();
    }
    delCell.style
      ..color = &quot;red&quot;
      ..fontSize = &quot;${delIconSize}px&quot;
      ..textAlign = alignCross
      ..cursor = &quot;pointer&quot;;

    DiaUtils.appendHtml2(delCell, DiaUtils.UNICODE_DELETE_CROSS);
    delCell.onClick.listen((UIEvent e) {
      &#47;&#47; close dialog if clicked into the del icon.
      Rectangle rect = delCell.getBoundingClientRect();
      Point tpoint = DiaUtils.getTouchPoint(e);
      Rectangle iconRect = Rectangle(
          rect.right - delIconSize, rect.top, delIconSize, delIconSize);
      if (redcross_left) {
        iconRect = rect;
      }

      if (iconRect.containsPoint(tpoint)) {
        if (dia != null) {
          close(UserInput(DiaAttr.DIA_ACT_ABORT, null, null));
          dia = null;
        }
        &#47;&#47; TODO remove as soon as Chrome sizes the window back properly when keyboard closed
        if (DiaUtils.isTablet()) {
          window.scrollTo(0, 0);
          inputDialogStatus = 0;
        }
      }
    });
  }

  TableRowElement row;
  TableCellElement cell;
  int nrows = 0;
  List&lt;InputElement&gt; checkBoxes, tinputFields, tinputFields2D;

  void addEmptyTableRow() {
    row = TableRowElement();
    cell = TableCellElement();
    DiaUtils.appendHtml2(cell, &#39;&amp;nbsp;&#39;);
    cell.colSpan = NCOLS; &#47;&#47; 1 empty row
    row.append(cell);

    diaTable.append(row);
  }

  &#47;&#47;&#47; Compile the results from the dialog&#39;s current fields:
  &#47;&#47;&#47; Keys: Buttons code. Values:
  &#47;&#47;&#47; [checkbox value, input text, checkbox value, inputtext, ...].
  &#47;&#47;&#47; The checkbox values can be &quot;null&quot; (no checkbox), &quot;true&quot;, &quot;false&quot;.
  &#47;&#47;&#47; For 2D:
  &#47;&#47;&#47; [ checkbox value, input text, input text2, checkbox value, input text, input text2,
  &#47;&#47;&#47;   checkbox value, ...].
  &#47;&#47;&#47;
  &#47;&#47;&#47;  Sample result format: [checkbox, F2 values, F1 values]
  &#47;&#47;   The first half of the non-checkbox value list constitute the F2 values,
  &#47;&#47;   The second half the F1 values.
  &#47;&#47;    {0: [false, null, null],
  &#47;&#47;    1: [true, Exponential, Gaussian],
  &#47;&#47;    2: [null, 0.3, 0.3], 3: [null, 0.5, -1.0, 0.1, -1.0],
  &#47;&#47;    4: [true, 2048, 256]}
  Map&lt;int, List&lt;String&gt;&gt; getResults() {
    Map&lt;int, List&lt;String&gt;&gt; results = Map&lt;int, List&lt;String&gt;&gt;();
    String cboxResult, inputResult, inputResult2D;
    List&lt;String&gt; resultLine;

    for (int i = 0; i &lt; nrows; i++) {
      resultLine = &lt;String&gt;[];
      InputElement cbox = checkBoxes[i];
      cboxResult = &quot;null&quot;;
      if (cbox != null) {
        cboxResult = &quot;${cbox.checked}&quot;;
      }

      inputResult = &quot;null&quot;;
      if (tinputFields[i] != null) {
        inputResult = tinputFields[i].value;
      }
      resultLine.add(cboxResult);
      resultLine.add(inputResult);

      if (dim == 2) {
        inputResult2D = &quot;null&quot;;
        if (tinputFields2D[i] != null) {
          inputResult2D = tinputFields2D[i].value;
        }
        resultLine.add(inputResult2D);
      }

      results[i] = resultLine;
    }
    return results;
  }

  &#47;&#47; called when button [i] was pressed, i=-1 mean red cross pressed (abort)
  void executeButton(int i, Event e) {
    e.preventDefault();
    if (i == -1) {
      if (dia != null) {
        close(UserInput(DiaAttr.DIA_ACT_ABORT, null, null));
      }
    } else {
      if (dia != null) {
        close(UserInput(DiaAttr.DIA_ACTIONS[i], getResults(), null));
      }
    }
    dia = null;

    &#47;&#47; TODO remove as soon as Chrome sizes the window back properly when keyboard closed
    if (DiaUtils.isTablet()) {
      window.scrollTo(0, 0);
      inputDialogStatus = 0;
    }
  }

  &#47;&#47; add delete icon
  row = TableRowElement();
  if (!redcross_left) {
    &#47;&#47; we need this for delCell to be rightmost
    for (int i = 0; i &lt; fakeCells.length; i++) {
      row.append(fakeCells[i]);
    }
  }
  row.append(delCell); &#47;&#47; the actual cell
  diaTable.append(row);

  &#47;&#47; Add table header for input dialog, this is the dialog text for confirm and info dialogs.
  int textfontSize = int.parse(attr[DiaAttr.DIALOG_TEXT_FONTSIZE]);
  int fontsize = textfontSize;
  row = TableRowElement();
  cell = TableCellElement();
  DiaUtils.appendHtml2(cell, htmlTitleText);
  String textalign = attr[DiaAttr.DIALOG_HEADER_TEXTALIGN];
  if (buttonLabels != null &amp;&amp;
      buttonLabels.isEmpty &amp;&amp;
      inputTextLabelInfo == null &amp;&amp;
      buttontype == ALIGN_LEFT) {
    &#47;&#47; this causes a simple info dialog with a html text
    textalign = &quot;left&quot;;
    fontsize = int.parse(attr[DiaAttr.DIALOG_HELP_TEXT_FONTSIZE]);
  } else {
    fontsize = int.parse(attr[DiaAttr.DIALOG_HEADER_FONTSIZE]);
  }
  cell.colSpan = NCOLS; &#47;&#47; the htmlInfoText spans NCOLS columns
  cell.style
        ..textAlign = &quot;$textalign&quot;
        ..color = attr[DiaAttr.DIALOG_HEADER_COLOR]
        ..fontSize = &quot;${fontsize}px&quot;
        ..paddingTop = &quot;10px&quot; &#47;&#47; leave some space to the delete icon
      ;
  if (DiaUtils.isPhone()) {
    cell.style.paddingTop = &quot;6px&quot;;
  }

  if (inputTextLabelInfo != null) {
    cell.style.textDecoration = &quot;underline&quot;;
  }

  row.append(cell);
  diaTable.append(row);

  addEmptyTableRow();

  if (inputTextLabelInfo != null) {
    nrows = inputTextLabelInfo.length;

    checkBoxes = List&lt;InputElement&gt;(nrows);
    tinputFields = List&lt;InputElement&gt;(nrows);
    if (dim == 2) {
      tinputFields2D = List&lt;InputElement&gt;(nrows);
    }

    for (int i = 0; i &lt; nrows; i++) {
      row = TableRowElement();
      cell = TableCellElement();
      &#47;&#47; type must be declared inside loop, otherwise iOS would make checkbox display errors
      InputElement cbox;
      if (isChecked != null &amp;&amp;
          isChecked[i] != null &amp;&amp;
          (isChecked[i] == DiaUtils.TRUE || isChecked[i] == DiaUtils.FALSE)) {
        &#47;&#47;        if(buttontype == null)
        &#47;&#47;          buttontype = DiaAttr.CHECKBOX;
        cbox = InputElement(type: buttontype);
        cbox.checked = DiaUtils.getBoolFromString(isChecked[i]);
        &#47;&#47;        cbox.value = &quot;checked&quot;; &#47;&#47; TODO ???
        cbox.style.fontSize = &quot;${textfontSize}px&quot;;
        if (buttontype == DiaAttr.RADIO) {
          &#47;&#47; force all radio buttons to belong to this radio group (currently no others)
          cbox.name = RADIOGROUP1;
        }
        cell.append(cbox);
      }
      checkBoxes[i] = cbox; &#47;&#47; null allowed!

      row.append(cell);

      cell = TableCellElement();
&#47;&#47;        appendHtml2(cell, inputTextLabelInfo[i][ITXT]);
      DiaUtils.appendHtml2(cell, inputTextLabelInfo[i]);
      cell.style
        ..textAlign = &quot;left&quot;
        ..color = attr[DiaAttr.DIALOG_TEXT_COLOR];

      if (i &amp; 1 != 0 &amp;&amp; alternateRowColor) {
        cell.style.color = attr[DiaAttr.DIALOG_TEXT_COLOR2];
      }

      row.append(cell);

      &#47;&#47; Returns new text input field containing default [text]
      &#47;&#47; May return null. The field is appended to the cbox further down
      TextInputElement appendTextInputField(String text) {
        TextInputElement textinputField;
        if (sizes[i] &gt; 0) {
          bool readOnly = false;
          if (text != null &amp;&amp; text.startsWith(READ_ONLY)) {
            readOnly = true;
            text = text.substring(READ_ONLY.length);
          }

          cell = TableCellElement();
          textinputField = TextInputElement();
          textinputField.value = text;
          textinputField.size = sizes[i];
          if (readOnly) {
            textinputField.readOnly = readOnly;
          }
&#47;&#47;          textinputField.disabled
          textinputField.style
            ..fontSize = &quot;${textfontSize - 1}px&quot;
            ..background = attr[DiaAttr.DIALOG_INPUT_BG];

          cell.append(textinputField);
          textinputField.onMouseDown.listen((UIEvent e) {
            &#47;&#47; auto-select radiobutton when it has a textfield and the user clicks into it
            if (checkBoxes[i] != null &amp;&amp; checkBoxes[i].name == RADIOGROUP1) {
              checkBoxes[i].checked = true;
            }
          });

          textinputField.onKeyPress.listen((KeyboardEvent e) {
            &#47;&#47; don&#39;t accept &quot;Enter&quot; in text field, has side effects
            if (e.keyCode == KeyCode.ENTER ||
                e.keyCode == KeyCode.MAC_ENTER) {
              e.preventDefault();
              e.stopPropagation();
              if (DiaUtils.isTablet()) {
                executeButton(0, e);
              }
            }
          });
        }
        row.append(cell);
        return textinputField;
      }

      tinputFields[i] = appendTextInputField(defaultInputTexts[i]);

      &#47;&#47; appends combobox to previous text field
      void appendComboBox(
          List&lt;List&lt;String&gt;&gt; comboInfo, List&lt;InputElement&gt; textInFields) {
        &#47;&#47; create combo box if required, in form of a button and a popup
        if (comboInfo != null &amp;&amp;
            comboInfo[i] != null &amp;&amp;
            comboInfo[i].isNotEmpty) {
          TableCellElement cell2 = TableCellElement();
          ButtonElement comboBut = ActButton().but;
          comboBut.appendText(DiaUtils.UNICODE_COMBO_BOX);
          comboBut.style
            ..padding = &quot;none&quot; &#47;&#47;&quot;0 0 0 0&quot; &#47;&#47; t r b l  &#47;&#47;
            ..margin = &quot;none&quot;
            ..verticalAlign = &quot;middle&quot;
            ..textAlign = &quot;left&quot;
            ..display = &quot;table-cell&quot;
            ..fontSize = &quot;${textfontSize - 6}px&quot;;

          bool disableTextInputCombo = true;
          String firstItem = comboInfo[i][0];

          &#47;&#47; if this marker is present, the text input field belonging to the
          &#47;&#47; combo box display will stay enabled, otherwise it will be disabled.
          if (firstItem.startsWith(ENABLE_TEXTINPUT_COMBO)) {
            disableTextInputCombo = false;
          }

          bool disableComboSelection = false;
          &#47;&#47; if this marker is present, a selected combo item will NOT
          &#47;&#47; be put into the textfield the combo belongs to.
          if (firstItem.contains(DISABLE_COMBO_SELECTION)) {
            disableComboSelection = true;
          }

          comboBut.addEventListener(&#39;click&#39;, (e) {
&#47;&#47;              print(&quot;1000=clicked combo=$i&quot;);
            &#47;&#47;open the combo box
            e.preventDefault();
            e.stopPropagation();

            &#47;&#47; auto-select radiobutton when it has a textfield and the user clicks into it
            if (checkBoxes[i] != null &amp;&amp; checkBoxes[i].name == RADIOGROUP1) {
              checkBoxes[i].checked = true;
            }

            List&lt;String&gt; combo_popup = [];

            for (int k = 0; k &lt; comboInfo[i].length; k++) {
              String out = comboInfo[i][k];

              &#47;&#47; remove in this sequence (must have been built this way if used)
              if (out.startsWith(ENABLE_TEXTINPUT_COMBO)) {
                out = out.substring(ENABLE_TEXTINPUT_COMBO.length);
              }
              if (out.startsWith(DISABLE_COMBO_SELECTION)) {
                out = out.substring(DISABLE_COMBO_SELECTION.length);
              }
              combo_popup.add(&quot;${out}${DiaUtils.SEP_STAN}${k}&quot;);
            }

            &#47;&#47; toggles popup when clicking two times on the popup cell
            if (popup == null || !popup.isOpen()) {
              math.Point tpoint = DiaUtils.getTouchPoint(e);
              &#47;&#47; leave some room to be able to click on popup icon to close it
              int x = tpoint.x + 12;
              int y = tpoint.y + 12;
              &#47;&#47; make sure a big number of entries is visible and doesn&#39;t get clipped
              int nitems = comboInfo[i].length;
              bool preventDefault = true;
              final int N10 = 10,
                  N15 = 15,
                  WIDTH15 = 250,
                  HEIGHT15 = (diaContainer.clientHeight * 0.75).round();

              if (nitems &gt; N10 &amp;&amp; nitems &lt;= N15) {
                y = 0;
              }
              if (nitems &gt; N15) {
                y = 10;
                preventDefault = false; &#47;&#47; enable scrolling on touch devices
              }
              popup = PopupMenu(diaTable, &quot;&quot;, combo_popup, null, null,
                  ((UserInput results) {
                String actionCode = results.buttonCode;
                &#47;&#47; these arguments make sure that [processActions] takes the
                &#47;&#47; action from [sidebarItem.theAction]
                if (actionCode != null &amp;&amp; actionCode.isNotEmpty) {
                  &#47;&#47; remove possible marker
                  String pattern = comboInfo[i][int.parse(actionCode)];
                  if (pattern.startsWith(ENABLE_TEXTINPUT_COMBO)) {
                    pattern =
                        pattern.substring(ENABLE_TEXTINPUT_COMBO.length);
                  }

                  if (!disableComboSelection) {
                    textInFields[i].value = pattern;
                  }
                  &#47;&#47; make sure this item is now selected
                  if (checkBoxes[i] != null) {
                    checkBoxes[i].checked = true;
                  }
                }
              }), x, y, preventDefault);

              if (nitems &gt; N15) {
                popup.dia.style
&#47;&#47;            ..overflowX = &quot;scroll&quot;
                  ..overflowY = &quot;scroll&quot;
                  ..width = &quot;${WIDTH15}px&quot;
                  ..height = &quot;${HEIGHT15}px&quot;;
              }
            } else {
              popup.close(null); &#47;&#47; toggle off when on
            }
          }); &#47;&#47; combo event listener

          if (disableTextInputCombo &amp;&amp; textInFields[i] != null) {
            textInFields[i].disabled = true;
          }
&#47;&#47;            print(&quot;1001=appended $i=${comboInfo[i]}&quot;);
          cell2.append(comboBut);
          row.append(cell2);
&#47;&#47;            print(&quot;${cell2. clientWidth} ${cell2.clientHeight}&quot;);
        } else if (dim == 2 &amp;&amp;
            hasDim1Combo &amp;&amp;
            defaultInputTexts2D != null &amp;&amp;
            defaultInputTexts2D[i] != null) {
          &#47;&#47; must append a fake button to align the F1 columns
          TableCellElement cell2 = TableCellElement();
          ButtonElement comboBut = ActButton().but;
          comboBut.appendText(DiaUtils.UNICODE_COMBO_BOX);
          comboBut.style
            ..background = &quot;white&quot; &#47;&#47; irrelevant because opacity is 0
            ..padding = &quot;none&quot; &#47;&#47;&quot;0 0 0 0&quot; &#47;&#47; t r b l  &#47;&#47;
            ..margin = &quot;none&quot;
            ..verticalAlign = &quot;middle&quot;
            ..textAlign = &quot;left&quot;
            ..display = &quot;table-cell&quot;
            ..fontSize = &quot;${textfontSize - 6}px&quot;
            ..cursor = &quot;auto&quot;
            ..opacity = &quot;0.0&quot;; &#47;&#47; makes button invisible

          &#47;&#47; no action when clicked!
          comboBut.addEventListener(&#39;click&#39;, (e) {
            e.preventDefault();
            e.stopPropagation();
          });

          cell2.append(comboBut);
          row.append(cell2);
        }
      } &#47;&#47; appendComboBox()

      appendComboBox(comboInfo1D, tinputFields);

      if (dim == 2) {
        tinputFields2D[i] = appendTextInputField(defaultInputTexts2D[i]);
        appendComboBox(comboInfo2D, tinputFields2D);
      }

&#47;&#47;        print(&quot;1002=appended row=$i with ncells=${row.cells.length}&quot;);
&#47;&#47;        if(row.cells.length &gt; 4){
&#47;&#47;          print(&quot;1003=cell 3=${row.cells[3].runtimeType}&quot;);
&#47;&#47;        }
      diaTable.append(row);
    } &#47;&#47; for i ... nrows
    &#47;&#47; leave some space to next item (OK button)
    diaTable.style.paddingBottom = &quot;10px&quot;;
  } &#47;&#47; if(inputTextlabelInfo != null)

  if (buttonLabels == null) {
    buttonLabels = [DiaAttr.DIA_BUT_OK];
  }
  actButs = List(buttonLabels.length);

  int buttonFontsize = int.parse(attr[DiaAttr.DIALOG_BUTTON_FONTSIZE]);
  for (int i = 0; i &lt; buttonLabels.length; i++) {
    ActButton actbut = ActButton();
    actbut.but.appendText(buttonLabels[i]);
    actbut.but.style..fontSize = &quot;${buttonFontsize}px&quot;;
    actbut.but.addEventListener(&#39;click&#39;, (e) {
      executeButton(i, e);
    });
    actButs[i] = actbut;
  }

  document.onKeyDown.listen((KeyboardEvent e) {
    &#47;&#47; escape key acts like pressing red cross
    if (e.keyCode == KeyCode.ESC) {
      executeButton(-1, e);
    }
  });

  inputDialogStatus = 1;

  &#47;&#47; A form element is needed such that the width adjustment below will work:
  &#47;&#47; The correct clientWidth of the table is computed internally when doing this.
  &#47;&#47; Appending the table directly to the dialog will not result in the correct size.
  FormElement form = FormElement();
  form.append(diaTable);

  for (int i = 0; i &lt; actButs.length; i++) {
    if (buttonLabels[i] != null) {
      form.append(actButs[i].but);
    }
  }
  dia.append(form);

  &#47;&#47; now adjust width of dialog to the table width. Must come at the very end,
  &#47;&#47; because the form now has its correct width.

  if (diaContainer == null) {
    return; &#47;&#47; non-modal dialogs
  }

  &#47;&#47; center the dialog vertically
  int marginTop = diaContainer.clientHeight ~&#47; 2 - dia.clientHeight ~&#47; 2;
  if (marginTop &lt; 0) {
    marginTop = 0;
  }
  &#47;&#47;and shift a little up for optical reasons
  marginTop -= (marginTop * 0.2).round();
  if (DiaUtils.isTablet() &amp;&amp; inputTextLabelInfo != null) {
    &#47;&#47; make sure input dialog is always top to minimize coverage by soft keyboard
    marginTop = 5;
  }

  &#47;&#47; make popup as wide as the table it contains
  int width = diaTable.clientWidth;
  if (actButs.isNotEmpty &amp;&amp;
      actButs[0] != null &amp;&amp;
      diaTable.clientWidth &lt; actButs[0].but.clientWidth) {
    width = buttonLabels[0].length *
        (DiaUtils.removePx(dia.style.fontSize)).round();
  }

  dia.style
        ..width = &quot;${width}px&quot; &#47;&#47; make popup as wide as the table it contains
        ..marginTop = &quot;${marginTop}px&quot; &#47;&#47; This centers the dialog vertically
      ;
}</code></pre>
    </section>

  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-right" class="col-xs-6 col-sm-6 col-md-2 sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    smart_dialogs 2.1.2
  </span>

  
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="static-assets/typeahead.bundle.min.js"></script>
<script src="static-assets/highlight.pack.js"></script>
<script src="static-assets/URI.js"></script>
<script src="static-assets/script.js"></script>


</body>

</html>
